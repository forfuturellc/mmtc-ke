{#
 # Viewing costs
 #}
{% extends '_layouts/default.html' %}
{% set cssURL = '/css/transaction.css' %}


{% block content %}
<!-- Networks -->
<div class="networks-list-wrapper">
  <ul class="networks-list">
    {% for a_network in networks %}
    <li {% if a_network.name == network.name %}class="active"{% endif %}>
      <a href="{{ site.baseurl }}/n/{{ a_network.name }}">{{ a_network.name }}</a>
    </li>
    {% endfor %}
  </ul>
</div>


<!-- The page header -->
<header class="main-content-header center">
  <h1>Calculate Cost of <span class="network-name">{{ network.name | capitalize }}</span> Transaction</h1>
</header>


<!--  Result -->
{% if result %}
<div class="result center notification-wrapper">
  {% if result.error %}{% set alert_class = 'danger' %}{% endif %}
  {% if result.success %}{% set alert_class = 'success' %}{% endif %}

  <div class="animated bounceIn">
    <div id="notification" class="alert alert-{{ alert_class }} alert-dismissible" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        {% if result.error %}
          {{ result.message  }}
        {% elif result.success %}
        <p>It will cost you <span class="results-cost"><strong>KES. {{ result.cost }} /=</strong></span></p>
        {% endif %}
    </div>
  </div>
</div>
{% endif %}


<!-- Tab panel for the transactions -->
<div id="input-panel"><div role="tabpanel" class="cost-panel">
  <!-- tabpanel.start -->

  {% macro active(transaction, first) %}
    {% if (body.transactionType == transaction.name) or (first and not body) %}active{% endif %}
  {% endmacro %}

  <!-- Nav tabs -->
  <ul class="nav nav-tabs" role="tablist">
    {% for transaction in network.transactions %}
    <li role="presentation" class="{{ active(transaction, loop.first) }}"><a href="#panel-{{ transaction.name }}" aria-controls="home" role="tab" data-toggle="tab">{{ transaction.name | capitalize }}</a></li>
    {% endfor %}

    {% if network.ussd_codes %}
    <li role="presentation" class="USSD Codes"><a href="#panel-ussd_codes" aria-controls="home" role="tab" data-toggle="tab">USSD Codes</a></li>
    {% endif %}
  </ul>

  <!-- Tab panes -->
  <div class="tab-content">

    {% for transaction in network.transactions %}
    <div role="tabpanel" class="tab-pane {{ active(transaction, loop.first) }}" id="panel-{{ transaction.name }}">
      {% include "_includes/transaction.html" %}
    </div>
    {% endfor %}

    <div role="tabpanel" class="tab-pane" id="panel-ussd_codes">
      {% include "_includes/ussd_codes.html" %}
    </div>

  </div>

  <!-- tabpanel.end -->
</div></div>
{% endblock %}
